---
title: "prac-day-four"
---

## Display the flights dataset in an alternative format to simply printing it (i.e. running flights).

```{r}
#| echo: false
library(nycflights13)
library(dplyr)
library(tibble)
print(flights)
```

## Rewrite this code using dplyr and the pipe:

```{r}
dist_tbl <- flights |>
  filter(month == 1) |>
  group_by(carrier) |>
  summarise(
    mean_distance = mean(distance),
    sd_distance = sd(distance),
    .groups = "drop"
  ) |>
  arrange(mean_distance)
dist_tbl
```

## Explain why the standard deviation is NA for one carrier, and why it is 0 for others. Demonstrate your answer using code.

1) For carrier 'OO' there is only one value hence sd is NA.
```{r}
#| echo: false
flights |> filter(month == 1, carrier == 'OO') |> select(carrier, distance) 
```

2) For carrier 'F9' and other carriers with sd 0 have the same distance values hence sd is 0.

```{r}
#| echo: false
flights |> filter(month ==1, carrier == 'F9') |> select(carrier, distance) 
```

## Using tidyr and dplyr where appropriate, construct a dataframe where the carriers are along the columns, and the rows are the average departure delay (dep_delay) flown by each carrier (carrier) in each month.

```{r}
#| echo: false
library(tidyr)
flights |> group_by(month, carrier) |> summarise(avg_dep_delay = mean(dep_delay), .groups = 'drop') |> pivot_wider(names_from = carrier, values_from = avg_dep_delay)
```

## Calculate the proportion of flights that were delayed (dep_delay greater than 0) but arrived on or before time (arr_delay less than or equal to 0).

```{r}
#| echo: false
proportion <- flights |> filter(dep_delay > 0 & arr_delay <= 0) |> count() |> pull(n)/nrow(flights)
print(proportion)
```

